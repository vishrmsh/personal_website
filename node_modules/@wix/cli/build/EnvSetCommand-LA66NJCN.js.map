{"version":3,"sources":["../../cli-astro-commands/src/components/EnvSetCommand/index.ts","../../cli-astro-commands/src/components/EnvSetCommand/EnvSetCommand.tsx","../../cli-astro-commands/src/components/EnvSetCommand/EnvSet.tsx"],"sourcesContent":["export { EnvSetCommand } from './EnvSetCommand.js';\n","import React from 'react';\nimport type { FC } from 'react';\nimport { SiteAuthProvider } from '@wix/cli-auth';\nimport { useProjectModel } from '../../model.js';\nimport { EnvSet } from './EnvSet.js';\n\nexport const EnvSetCommand: FC<{\n  variable: { key: string; value: string };\n}> = ({ variable }) => {\n  const {\n    model: {\n      config: { siteId },\n    },\n  } = useProjectModel();\n\n  return (\n    <SiteAuthProvider siteId={siteId}>\n      <EnvSet variable={variable} />\n    </SiteAuthProvider>\n  );\n};\n","import React from 'react';\nimport type { FC } from 'react';\nimport { match } from 'variant';\nimport { Alert, Spinner, useAsync } from '@wix/cli-ui-kit';\nimport { useBackendAsAServiceClient } from '@wix/backend-as-a-service-client';\nimport { useProjectModel } from '../../model.js';\n\nconst ENV_NAME = 'prod';\n\nexport const EnvSet: FC<{ variable: { key: string; value: string } }> = ({\n  variable,\n}) => {\n  const { model } = useProjectModel();\n  const backendAsAServiceClient = useBackendAsAServiceClient();\n\n  const { status } = useAsync(async () => {\n    await backendAsAServiceClient.upsertAppEnvironment(\n      model.config.appId,\n      ENV_NAME,\n      {\n        [variable.key]: variable.value,\n      }\n    );\n  }, []);\n\n  return match(status, {\n    Loading: () => <Spinner text=\"Setting environment variable...\" />,\n    Success: () => (\n      <Alert type=\"success\">\"{variable.key}\" was successfully set</Alert>\n    ),\n    Error: () => null,\n    NotRequested: () => null,\n  });\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;ACAA;AAAA,IAAAA,gBAAkB;;;ACAlB;AAAA,mBAAkB;AAElB,qBAAsB;AAKtB,IAAM,WAAW;AAEV,IAAM,SAA2D,CAAC;AAAA,EACvE;AACF,MAAM;AACJ,QAAM,EAAE,MAAM,IAAI,gBAAgB;AAClC,QAAM,0BAA0B,2BAA2B;AAE3D,QAAM,EAAE,OAAO,IAAI,SAAS,YAAY;AACtC,UAAM,wBAAwB;AAAA,MAC5B,MAAM,OAAO;AAAA,MACb;AAAA,MACA;AAAA,QACE,CAAC,SAAS,GAAG,GAAG,SAAS;AAAA,MAC3B;AAAA,IACF;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,aAAO,sBAAM,QAAQ;AAAA,IACnB,SAAS,MAAM,6BAAAC,QAAA,cAAC,WAAQ,MAAK,mCAAkC;AAAA,IAC/D,SAAS,MACP,6BAAAA,QAAA,cAAC,SAAM,MAAK,aAAU,KAAE,SAAS,KAAI,wBAAsB;AAAA,IAE7D,OAAO,MAAM;AAAA,IACb,cAAc,MAAM;AAAA,EACtB,CAAC;AACH;;;AD3BO,IAAM,gBAER,CAAC,EAAE,SAAS,MAAM;AACrB,QAAM;AAAA,IACJ,OAAO;AAAA,MACL,QAAQ,EAAE,OAAO;AAAA,IACnB;AAAA,EACF,IAAI,gBAAgB;AAEpB,SACE,8BAAAC,QAAA,cAAC,oBAAiB,UAChB,8BAAAA,QAAA,cAAC,UAAO,UAAoB,CAC9B;AAEJ;","names":["import_react","React","React"]}