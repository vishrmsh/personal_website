{"version":3,"sources":["../../cli-site/src/files/wix.lock.ts","../../cli-site/src/velo.ts"],"sourcesContent":["import { CliError, CliErrorCode } from '@wix/cli-error';\nimport { getWixLockFilePath } from '@wix/cli-core-definitions';\nimport { pathExists, readFile, outputFile } from '@wix/cli-fs';\n\nexport function isWixLockExists(projectFolder: string) {\n  return pathExists(getWixLockFilePath(projectFolder));\n}\n\nexport function readWixLock(projectFolder: string) {\n  return readFile(getWixLockFilePath(projectFolder), 'utf-8');\n}\n\nexport async function saveWixLock(projectFolder: string, content: string) {\n  try {\n    await outputFile(getWixLockFilePath(projectFolder), content);\n  } catch (e) {\n    throw new CliError({\n      code: CliErrorCode.FailedToWriteWixLock(),\n      cause: e,\n    });\n  }\n}\n","import type { File, NpmPackage } from '@wix/velo-client';\nimport { readPackageJson, readPackageJsonContent } from '@wix/cli-fs';\nimport { WIX_LOCK_FILENAME } from '@wix/cli-core-definitions';\nimport { isWixLockExists, readWixLock } from './files/wix.lock.js';\n\nexport async function loadProjectRootFiles(projectFolder: string) {\n  if (await isWixLockExists(projectFolder)) {\n    const [packageJson, wixLock] = await Promise.all([\n      readPackageJsonContent(projectFolder),\n      readWixLock(projectFolder),\n    ]);\n\n    return [\n      { path: 'package.json', content: packageJson },\n      { path: WIX_LOCK_FILENAME, content: wixLock },\n    ] satisfies File[];\n  }\n\n  return [];\n}\n\nexport async function getProjectDependencies(projectFolder: string) {\n  const packageJson = await readPackageJson(projectFolder);\n\n  return Object.entries(packageJson.dependencies ?? {}).map<NpmPackage>(\n    ([name, version]) => ({ name, version })\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AAIO,SAAS,gBAAgB,eAAuB;AACrD,SAAO,WAAW,mBAAmB,aAAa,CAAC;AACrD;AAEO,SAAS,YAAY,eAAuB;AACjD,SAAO,SAAS,mBAAmB,aAAa,GAAG,OAAO;AAC5D;AAEA,eAAsB,YAAY,eAAuB,SAAiB;AACxE,MAAI;AACF,UAAM,WAAW,mBAAmB,aAAa,GAAG,OAAO;AAAA,EAC7D,SAAS,GAAG;AACV,UAAM,IAAI,SAAS;AAAA,MACjB,MAAM,aAAa,qBAAqB;AAAA,MACxC,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AACF;;;ACrBA;AAKA,eAAsB,qBAAqB,eAAuB;AAChE,MAAI,MAAM,gBAAgB,aAAa,GAAG;AACxC,UAAM,CAAC,aAAa,OAAO,IAAI,MAAM,QAAQ,IAAI;AAAA,MAC/C,uBAAuB,aAAa;AAAA,MACpC,YAAY,aAAa;AAAA,IAC3B,CAAC;AAED,WAAO;AAAA,MACL,EAAE,MAAM,gBAAgB,SAAS,YAAY;AAAA,MAC7C,EAAE,MAAM,mBAAmB,SAAS,QAAQ;AAAA,IAC9C;AAAA,EACF;AAEA,SAAO,CAAC;AACV;AAEA,eAAsB,uBAAuB,eAAuB;AAClE,QAAM,cAAc,MAAM,gBAAgB,aAAa;AAEvD,SAAO,OAAO,QAAQ,YAAY,gBAAgB,CAAC,CAAC,EAAE;AAAA,IACpD,CAAC,CAAC,MAAM,OAAO,OAAO,EAAE,MAAM,QAAQ;AAAA,EACxC;AACF;","names":[]}