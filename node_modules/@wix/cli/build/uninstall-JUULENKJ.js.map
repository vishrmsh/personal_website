{"version":3,"sources":["../../cli-site-old/src/uninstall/index.ts","../../cli-site-old/src/uninstall/uninstall.ts"],"sourcesContent":["export { uninstall } from './uninstall.js';\n","import { CliError, CliErrorCode } from '@wix/cli-error';\nimport type { CommandServices } from '@wix/cli-command-contract';\nimport {\n  resolvePackageManager,\n  resolveNpmDependencies,\n} from '../velo-npm/index.js';\nimport { createLogger } from '../logger.js';\nimport { createI18nT } from '../i18n.js';\nimport type { ProjectModel } from '../model.js';\nimport { authenticate } from '../authentication.js';\n\nexport async function uninstall(\n  model: ProjectModel,\n  services: CommandServices,\n  options: {\n    yarn?: boolean;\n    npm?: boolean;\n  },\n  initialPackageName: string\n) {\n  const t = createI18nT();\n  const logger = createLogger({ t });\n\n  const authState = await authenticate({\n    metaSiteId: model.metaSiteId,\n    biLogger: services.biLogger,\n    errorReporter: services.errorReporter,\n  });\n\n  const packageName = initialPackageName.trim();\n\n  if (!packageName) {\n    throw new CliError({\n      code: CliErrorCode.WixUninstallMissingPackageName(),\n      cause: null,\n    });\n  }\n\n  const logDependencyUninstalled =\n    logger.logDependencyUninstalling(packageName);\n\n  try {\n    const packageManager = await resolvePackageManager(\n      model.projectFolder,\n      options\n    );\n    await packageManager.runUninstallPackage(model.projectFolder, packageName);\n    await resolveNpmDependencies(model.projectFolder, { authState });\n    logDependencyUninstalled.success();\n  } catch (error) {\n    logDependencyUninstalled.fail();\n    throw error;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;ACAA;AAWA,eAAsB,UACpB,OACA,UACA,SAIA,oBACA;AACA,QAAM,IAAI,YAAY;AACtB,QAAM,SAAS,aAAa,EAAE,EAAE,CAAC;AAEjC,QAAM,YAAY,MAAM,aAAa;AAAA,IACnC,YAAY,MAAM;AAAA,IAClB,UAAU,SAAS;AAAA,IACnB,eAAe,SAAS;AAAA,EAC1B,CAAC;AAED,QAAM,cAAc,mBAAmB,KAAK;AAE5C,MAAI,CAAC,aAAa;AAChB,UAAM,IAAI,SAAS;AAAA,MACjB,MAAM,aAAa,+BAA+B;AAAA,MAClD,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAEA,QAAM,2BACJ,OAAO,0BAA0B,WAAW;AAE9C,MAAI;AACF,UAAM,iBAAiB,MAAM;AAAA,MAC3B,MAAM;AAAA,MACN;AAAA,IACF;AACA,UAAM,eAAe,oBAAoB,MAAM,eAAe,WAAW;AACzE,UAAM,uBAAuB,MAAM,eAAe,EAAE,UAAU,CAAC;AAC/D,6BAAyB,QAAQ;AAAA,EACnC,SAAS,OAAO;AACd,6BAAyB,KAAK;AAC9B,UAAM;AAAA,EACR;AACF;","names":[]}