{"version":3,"sources":["../../cli-site-old/src/commands/render-command.tsx"],"sourcesContent":["import React from 'react';\nimport type { ReactElement } from 'react';\nimport type { Command } from '@commander-js/extra-typings';\nimport type { CommandServices } from '@wix/cli-command-contract';\nimport type { UserInfo } from '@wix/cli-auth';\nimport { SiteAuthProvider } from '@wix/cli-auth';\nimport { render } from '@wix/cli-ui-kit';\nimport { addUserFields } from '@wix/cli-telemetry';\nimport { I18nProvider } from '@wix/cli-i18n';\nimport { ErrorReporterProvider } from '@wix/cli-error-reporting';\nimport { BiProvider } from '@wix/cli-telemetry-react';\nimport { runCommand } from './run-command.js';\nimport { ProjectModelProvider } from '../model.js';\nimport messages from '../messages.json' with { type: 'json' };\n\nexport async function renderCommand(\n  command: Command,\n  services: CommandServices,\n  cliVersion: string,\n  component: ReactElement\n) {\n  await runCommand(command, services, cliVersion, async (model) => {\n    const { biLogger, errorReporter } = services;\n\n    const handleLogin = (userInfo: UserInfo) => {\n      errorReporter.setUser({ id: userInfo.userId });\n      addUserFields(biLogger, userInfo.userId);\n    };\n\n    await render(\n      <BiProvider value={biLogger}>\n        <ErrorReporterProvider value={errorReporter}>\n          <SiteAuthProvider siteId={model.metaSiteId} onLogin={handleLogin}>\n            <I18nProvider messages={messages}>\n              <ProjectModelProvider value={model}>\n                {component}\n              </ProjectModelProvider>\n            </I18nProvider>\n          </SiteAuthProvider>\n        </ErrorReporterProvider>\n      </BiProvider>\n    );\n  });\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA,mBAAkB;AAelB,eAAsB,cACpB,SACA,UACA,YACA,WACA;AACA,QAAM,WAAW,SAAS,UAAU,YAAY,OAAO,UAAU;AAC/D,UAAM,EAAE,UAAU,cAAc,IAAI;AAEpC,UAAM,cAAc,CAAC,aAAuB;AAC1C,oBAAc,QAAQ,EAAE,IAAI,SAAS,OAAO,CAAC;AAC7C,oBAAc,UAAU,SAAS,MAAM;AAAA,IACzC;AAEA,UAAM;AAAA,MACJ,6BAAAA,QAAA,cAAC,cAAW,OAAO,YACjB,6BAAAA,QAAA,cAAC,yBAAsB,OAAO,iBAC5B,6BAAAA,QAAA,cAAC,oBAAiB,QAAQ,MAAM,YAAY,SAAS,eACnD,6BAAAA,QAAA,cAAC,gBAAa,UAAU,oBACtB,6BAAAA,QAAA,cAAC,wBAAqB,OAAO,SAC1B,SACH,CACF,CACF,CACF,CACF;AAAA,IACF;AAAA,EACF,CAAC;AACH;","names":["React"]}