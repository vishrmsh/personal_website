{"version":3,"sources":["../../cli-astro-commands/src/components/EnvPullCommand/index.ts","../../cli-astro-commands/src/components/EnvPullCommand/EnvPullCommand.tsx","../../cli-astro-commands/src/components/EnvPullCommand/EnvPull.tsx"],"sourcesContent":["export { EnvPullCommand } from './EnvPullCommand.js';\n","import React from 'react';\nimport type { FC } from 'react';\nimport { SiteAuthProvider } from '@wix/cli-auth';\nimport { useProjectModel } from '../../model.js';\nimport { EnvPull } from './EnvPull.js';\n\nexport const EnvPullCommand: FC = () => {\n  const {\n    model: {\n      config: { siteId },\n    },\n  } = useProjectModel();\n\n  return (\n    <SiteAuthProvider siteId={siteId}>\n      <EnvPull />\n    </SiteAuthProvider>\n  );\n};\n","import React from 'react';\nimport type { FC } from 'react';\nimport { match } from 'variant';\nimport { Alert, Spinner, useAsync } from '@wix/cli-ui-kit';\nimport { updateEnvFile } from '@wix/cli-fs';\nimport { useBackendAsAServiceClient } from '@wix/backend-as-a-service-client';\nimport { ENV_FILE_NAME, getEnvFilePath } from '@wix/cli-astro-definitions';\nimport { useProjectModel } from '../../model.js';\n\nconst ENV_NAME = 'prod';\n\nexport const EnvPull: FC = () => {\n  const { model } = useProjectModel();\n  const backendAsAServiceClient = useBackendAsAServiceClient();\n\n  const { status } = useAsync(async () => {\n    const result = await backendAsAServiceClient.getAppEnvironmentByName(\n      model.config.appId,\n      ENV_NAME\n    );\n\n    await updateEnvFile(getEnvFilePath(model.projectFolder), result.variables);\n  }, []);\n\n  return match(status, {\n    Loading: () => (\n      <Spinner text={`Pulling environment \"${ENV_NAME}\" variables...`} />\n    ),\n    Success: () => (\n      <Alert type=\"success\">\n        Environment variables written to \"{ENV_FILE_NAME}\"\n      </Alert>\n    ),\n    Error: () => null,\n    NotRequested: () => null,\n  });\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;ACAA;AAAA,IAAAA,gBAAkB;;;ACAlB;AAAA,mBAAkB;AAElB,qBAAsB;AAOtB,IAAM,WAAW;AAEV,IAAM,UAAc,MAAM;AAC/B,QAAM,EAAE,MAAM,IAAI,gBAAgB;AAClC,QAAM,0BAA0B,2BAA2B;AAE3D,QAAM,EAAE,OAAO,IAAI,SAAS,YAAY;AACtC,UAAM,SAAS,MAAM,wBAAwB;AAAA,MAC3C,MAAM,OAAO;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,eAAe,MAAM,aAAa,GAAG,OAAO,SAAS;AAAA,EAC3E,GAAG,CAAC,CAAC;AAEL,aAAO,sBAAM,QAAQ;AAAA,IACnB,SAAS,MACP,6BAAAC,QAAA,cAAC,WAAQ,MAAM,wBAAwB,QAAQ,kBAAkB;AAAA,IAEnE,SAAS,MACP,6BAAAA,QAAA,cAAC,SAAM,MAAK,aAAU,sCACe,eAAc,GACnD;AAAA,IAEF,OAAO,MAAM;AAAA,IACb,cAAc,MAAM;AAAA,EACtB,CAAC;AACH;;;AD9BO,IAAM,iBAAqB,MAAM;AACtC,QAAM;AAAA,IACJ,OAAO;AAAA,MACL,QAAQ,EAAE,OAAO;AAAA,IACnB;AAAA,EACF,IAAI,gBAAgB;AAEpB,SACE,8BAAAC,QAAA,cAAC,oBAAiB,UAChB,8BAAAA,QAAA,cAAC,aAAQ,CACX;AAEJ;","names":["import_react","React","React"]}