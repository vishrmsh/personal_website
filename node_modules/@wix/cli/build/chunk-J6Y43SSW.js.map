{"version":3,"sources":["../../arm-client/src/useARMClient.ts","../../arm-client/src/client.ts","../../../node_modules/@wix/ambassador-ctp-gradual-rollout-v1-app-config/http.impl.ts","../../../node_modules/@wix/ambassador-ctp-gradual-rollout-v1-baas-release/http.impl.ts","../../arm-client/src/schemas.ts","../../arm-client/src/index.ts","../../cli-astro-commands/src/components/PreviewCommand/hooks/useUpdateManifest.ts","../../cli-astro-commands/src/components/PlatformLink/PlatformLink.tsx","../../cli-astro-commands/src/hooks/useUpdateDeploymentTopology.ts"],"sourcesContent":["import { useMemo } from 'react';\nimport { useHttpClient } from '@wix/cli-http-client-react';\nimport { ARMClient } from './client.js';\n\nexport function useARMClient(): ARMClient {\n  const httpClient = useHttpClient({ type: 'backoffice' });\n  return useMemo(() => new ARMClient(httpClient), [httpClient]);\n}\n","import type { ComponentConfig } from '@wix/ambassador-ctp-gradual-rollout-v1-app-config/types';\nimport type { AppManifest, LooseAppManifest } from '@wix/cli-app-manifest';\nimport type { HttpClient, HttpError } from '@wix/cli-http-client';\nimport type { Options } from 'p-retry';\nimport {\n  commitComponentOverride,\n  createAppRelease,\n  createComponents,\n  promoteAppVersionFromDraftToProduction,\n  updateAppRelease,\n} from '@wix/ambassador-ctp-gradual-rollout-v1-app-config/http';\nimport { release } from '@wix/ambassador-ctp-gradual-rollout-v1-baas-release/http';\nimport { CliError, CliErrorCode } from '@wix/cli-error';\nimport { isHttpError, isHttpValidationError } from '@wix/cli-http-client';\nimport { getTestOverrides } from '@wix/cli-test-overrides';\nimport pRetry from 'p-retry';\nimport { fields, variant } from 'variant';\nimport {\n  commitComponentOverrideSchema,\n  createAppReleaseSchema,\n  promoteAppVersionFromDraftToProductionSchema,\n  releaseArm2Schema,\n} from './schemas.js';\n\nconst { AppPermissionDenied } = CliErrorCode;\n\nconst UpdateAppReleaseData = variant({\n  TagNotFound: fields<{ cause: HttpError }>(),\n  TagUpdated: {},\n});\n\nexport class ARMClient {\n  private readonly retryOptions: Options;\n\n  constructor(private readonly httpClient: HttpClient) {\n    const { minRetryTimeout } = getTestOverrides();\n\n    this.retryOptions = {\n      maxTimeout: 3 * 1000,\n      minTimeout: minRetryTimeout,\n      retries: 3,\n    };\n  }\n\n  createComponents = async (\n    appId: string,\n    componentConfigs: ComponentConfig[],\n    projectId: string\n  ) => {\n    try {\n      await this.httpClient.request(\n        createComponents({ appId, componentConfigs, projectId })\n      );\n    } catch (e) {\n      if (isHttpError(e) && e.response?.status === 403) {\n        throw new CliError({\n          cause: e,\n          code: AppPermissionDenied({ appId }),\n        });\n      }\n      throw new CliError({\n        cause: e,\n        code: CliErrorCode.FailedToCreateComponents(),\n      });\n    }\n  };\n\n  createAppRelease = async (manifest: AppManifest, projectId: string) => {\n    try {\n      const { data } = await pRetry(\n        () =>\n          this.httpClient.request(\n            createAppRelease({\n              appId: manifest.appId,\n              componentConfigs: manifest.components,\n              projectId,\n            })\n          ),\n        this.retryOptions\n      );\n\n      return createAppReleaseSchema.parse(data).tag;\n    } catch (e) {\n      if (isHttpError(e)) {\n        if (e.response?.status === 403) {\n          throw new CliError({\n            cause: e,\n            code: AppPermissionDenied({ appId: manifest.appId }),\n          });\n        }\n\n        if (e.response?.status === 400 && isHttpValidationError(e)) {\n          throw new CliError({\n            cause: e,\n            code: CliErrorCode.AppReleaseConfigViolations({\n              violations:\n                e.response.data.details.validationError.fieldViolations,\n            }),\n          });\n        }\n      }\n\n      throw new CliError({\n        cause: e,\n        code: CliErrorCode.FailedToCreateAppRelease(),\n      });\n    }\n  };\n\n  createLooseAppRelease = async (\n    manifest: LooseAppManifest,\n    projectId: string\n  ) => {\n    return this.createAppRelease(manifest as AppManifest, projectId);\n  };\n\n  updateAppRelease = async (manifest: AppManifest, tag: string) => {\n    try {\n      await pRetry(\n        () =>\n          this.httpClient.request(\n            updateAppRelease({\n              appId: manifest.appId,\n              componentConfigs: manifest.components,\n              tag,\n            })\n          ),\n        this.retryOptions\n      );\n\n      return UpdateAppReleaseData.TagUpdated();\n    } catch (e) {\n      if (isHttpError(e)) {\n        if (e.response?.status === 404) {\n          return UpdateAppReleaseData.TagNotFound({ cause: e });\n        }\n        if (e.response?.status === 403) {\n          throw new CliError({\n            cause: e,\n            code: AppPermissionDenied({ appId: manifest.appId }),\n          });\n        }\n        if (e.response?.status === 400 && isHttpValidationError(e)) {\n          throw new CliError({\n            cause: e,\n            code: CliErrorCode.AppReleaseConfigViolations({\n              violations:\n                e.response.data.details.validationError.fieldViolations,\n            }),\n          });\n        }\n      }\n      throw new CliError({\n        cause: e,\n        code: CliErrorCode.FailedToUpdateAppRelease(),\n      });\n    }\n  };\n\n  updateLooseAppRelease = async (manifest: LooseAppManifest, tag: string) => {\n    return this.updateAppRelease(manifest as AppManifest, tag);\n  };\n\n  createDraftVersion = async (appId: string, tag: string) => {\n    try {\n      const { data } = await this.httpClient.request(\n        commitComponentOverride({\n          appId,\n          componentOverrideId: tag,\n        })\n      );\n\n      return commitComponentOverrideSchema.parse(data);\n    } catch (cause) {\n      throw new CliError({\n        cause,\n        code: CliErrorCode.FailedToCreateDraftVersion(),\n      });\n    }\n  };\n\n  releaseDraftVersion = async (\n    appId: string,\n    options: {\n      createNewMajor: boolean;\n      latestMajor: number;\n      notes: string;\n    }\n  ) => {\n    try {\n      const { data } = await this.httpClient.request(\n        promoteAppVersionFromDraftToProduction({\n          appId,\n          createNewMajor: options.createNewMajor,\n          latestMajor: options.latestMajor,\n          notes: options.notes,\n        })\n      );\n\n      const { fullVersion } =\n        promoteAppVersionFromDraftToProductionSchema.parse(data);\n\n      return { releasedVersion: fullVersion };\n    } catch (cause) {\n      throw new CliError({\n        cause,\n        code: CliErrorCode.FailedToReleaseDraftVersion(),\n      });\n    }\n  };\n\n  release = async (appId: string, componentOverrideId: string) => {\n    try {\n      const { data } = await pRetry(\n        () =>\n          this.httpClient.request(\n            release({\n              appId,\n              componentOverrideId,\n            })\n          ),\n        this.retryOptions\n      );\n\n      return releaseArm2Schema.parse(data).releaseBaseUrl;\n    } catch (e) {\n      throw new CliError({\n        cause: e,\n        code: CliErrorCode.FailedToReleaseHeadlessProject(),\n      });\n    }\n  };\n}\n",null,null,"import { z } from 'zod';\n\nexport const promoteAppVersionFromDraftToProductionSchema = z.object({\n  fullVersion: z.string(),\n});\n\nexport const commitComponentOverrideSchema = z.object({\n  nextMajor: z.string(),\n  nextMinor: z.string().optional(),\n});\n\nexport const createAppReleaseSchema = z.object({\n  tag: z.string(),\n});\n\nexport const releaseArm2Schema = z.object({\n  releaseBaseUrl: z.string(),\n});\n","export { ARMClient } from './client.js';\nexport { useARMClient } from './useARMClient.js';\n","import { useCallback } from 'react';\nimport { ComponentType } from '@wix/ambassador-devcenter-apps-v1-app-old/types';\nimport type { LooseAppManifest, LooseComponent } from '@wix/cli-app-manifest';\nimport { BACKEND_WORKER_COMPONENT_ID } from '@wix/cli-astro-definitions';\n\ntype ComponentMap = {\n  [T in LooseComponent as T['compType']]: T;\n};\n\ntype ComponentHandler<T extends keyof ComponentMap> = (options: {\n  component: ComponentMap[T];\n  serverUrl: string;\n  tunnelUrl?: string;\n}) => void;\n\ntype ComponentHandlers = {\n  [T in keyof ComponentMap]?: ComponentHandler<T>;\n};\n\nconst componentHandlers: ComponentHandlers = {\n  [ComponentType.WEBHOOK]: ({ component, serverUrl, tunnelUrl }) => {\n    component.compData.webhook.callbackUrl = normalizeUrl(\n      component.compData.webhook.callbackUrl,\n      tunnelUrl ?? serverUrl\n    );\n  },\n  [ComponentType.BACK_OFFICE_PAGE]: ({ component, serverUrl }) => {\n    component.compData.backOfficePage.iframeUrl = normalizeUrl(\n      component.compData.backOfficePage.iframeUrl,\n      serverUrl\n    );\n  },\n  [ComponentType.BACK_OFFICE_EXTENSION_WIDGET]: ({ component, serverUrl }) => {\n    component.compData.backOfficeExtensionWidget.iframeUrl = normalizeUrl(\n      component.compData.backOfficeExtensionWidget.iframeUrl,\n      serverUrl\n    );\n  },\n  [ComponentType.BACK_OFFICE_MODAL]: ({ component, serverUrl }) => {\n    component.compData.backOfficeModal.iframeUrl = normalizeUrl(\n      component.compData.backOfficeModal.iframeUrl,\n      serverUrl\n    );\n  },\n  [ComponentType.BACK_OFFICE_EXTENSION_MENU_ITEM]: ({\n    component,\n    serverUrl,\n  }) => {\n    component.compData.backOfficeExtensionMenuItem.iframeUrl = normalizeUrl(\n      component.compData.backOfficeExtensionMenuItem.iframeUrl,\n      serverUrl\n    );\n  },\n  [ComponentType.ECOM_SHIPPING_RATES]: ({\n    component,\n    serverUrl,\n    tunnelUrl,\n  }) => {\n    component.compData.ecomShippingRates.deploymentUri = normalizeUrl(\n      component.compData.ecomShippingRates.deploymentUri,\n      tunnelUrl ?? serverUrl\n    );\n  },\n  [ComponentType.ECOM_ADDITIONAL_FEES]: ({\n    component,\n    serverUrl,\n    tunnelUrl,\n  }) => {\n    component.compData.ecomAdditionalFees.deploymentUri = normalizeUrl(\n      component.compData.ecomAdditionalFees.deploymentUri,\n      tunnelUrl ?? serverUrl\n    );\n  },\n  [ComponentType.ECOM_DISCOUNTS_TRIGGER]: ({\n    component,\n    serverUrl,\n    tunnelUrl,\n  }) => {\n    component.compData.ecomDiscountsTrigger.deploymentUri = normalizeUrl(\n      component.compData.ecomDiscountsTrigger.deploymentUri,\n      tunnelUrl ?? serverUrl\n    );\n  },\n  [ComponentType.ECOM_VALIDATIONS]: ({ component, serverUrl, tunnelUrl }) => {\n    component.compData.ecomValidations.deploymentUri = normalizeUrl(\n      component.compData.ecomValidations.deploymentUri,\n      tunnelUrl ?? serverUrl\n    );\n  },\n  [ComponentType.ECOM_PAYMENT_SETTINGS]: ({\n    component,\n    serverUrl,\n    tunnelUrl,\n  }) => {\n    component.compData.ecomPaymentSettings.deploymentUri = normalizeUrl(\n      component.compData.ecomPaymentSettings.deploymentUri,\n      tunnelUrl ?? serverUrl\n    );\n  },\n  [ComponentType.GIFT_CARDS_PROVIDER]: ({\n    component,\n    serverUrl,\n    tunnelUrl,\n  }) => {\n    component.compData.giftCardsProvider.deploymentUri = normalizeUrl(\n      component.compData.giftCardsProvider.deploymentUri,\n      tunnelUrl ?? serverUrl\n    );\n  },\n  [ComponentType.TOPOLOGY]: ({ component, serverUrl, tunnelUrl }) => {\n    component.compData.topology.topology.backendApiUrl = tunnelUrl ?? serverUrl;\n  },\n};\n\nexport function useUpdateManifest() {\n  const updateManifest = useCallback(\n    (manifest: LooseAppManifest, serverUrl: string, tunnelUrl?: string) => {\n      const clone = structuredClone(manifest);\n\n      for (const component of clone.components) {\n        const handler = getHandler(\n          component as LooseComponent,\n          componentHandlers\n        );\n        handler?.({\n          component: component as LooseComponent,\n          serverUrl,\n          tunnelUrl,\n        });\n      }\n\n      return clone;\n    },\n    []\n  );\n\n  const updateManifestWithBackendWorker = useCallback(\n    (\n      manifest: LooseAppManifest,\n      deploymentId: string,\n      deploymentUrl: string,\n      label?: string,\n      commitHash?: string\n    ) => {\n      const clone = structuredClone(manifest);\n      clone.components.push({\n        compId: BACKEND_WORKER_COMPONENT_ID,\n        compType: ComponentType.BACKEND_WORKER,\n        compData: {\n          backendWorker: {\n            deploymentId,\n            deploymentUrl,\n            label,\n            commitHash,\n          },\n        },\n      });\n\n      return clone;\n    },\n    []\n  );\n\n  return {\n    updateManifest,\n    updateManifestWithBackendWorker,\n  };\n}\n\nfunction getHandler<C extends LooseComponent>(\n  component: C,\n  handlers: ComponentHandlers\n) {\n  return handlers[component.compType] as\n    | ComponentHandler<C['compType']>\n    | undefined;\n}\n\nfunction normalizeUrl(inputUrl: string | undefined, baseUrl: string) {\n  if (!inputUrl) {\n    return baseUrl;\n  }\n\n  if (URL.canParse(inputUrl)) {\n    return inputUrl;\n  }\n\n  const base = new URL(baseUrl);\n  const normalizedUrl = new URL(inputUrl, base);\n\n  // Preserve base query string if it exists\n  if (base.search) {\n    normalizedUrl.search = base.search;\n  }\n\n  return normalizedUrl.href;\n}\n","import React from 'react';\nimport type { FC } from 'react';\nimport { Box, Link, PointerSmallIcon } from '@wix/cli-ui-kit';\n\ninterface PlatformLinkProps {\n  url: string;\n  label: string;\n}\n\nexport const PlatformLink: FC<PlatformLinkProps> = ({ url, label }) => {\n  return (\n    <Box marginRight={1}>\n      <PointerSmallIcon />\n      <Box marginLeft={1}>\n        <Link url={url}>{label}</Link>\n      </Box>\n    </Box>\n  );\n};\n","import type { DeploymentTopologyEnvironmentType } from '@wix/cli-astro-definitions';\nimport {\n  deploymentTopologySchema,\n  getDeploymentTopologyPath,\n} from '@wix/cli-astro-definitions';\nimport { pathExists, readJson, writeJson } from '@wix/cli-fs';\nimport { useAsyncCallback } from '@wix/cli-ui-kit';\nimport { useProjectModel } from '../model.js';\n\ninterface UpdateDeploymentTopologyProps {\n  armTag: string;\n  serverUrl: string;\n  environment: DeploymentTopologyEnvironmentType;\n}\n\nexport function useUpdateDeploymentTopology() {\n  const {\n    model: {\n      projectFolder,\n      config: { siteId },\n    },\n  } = useProjectModel();\n\n  return useAsyncCallback(async (_, props: UpdateDeploymentTopologyProps) => {\n    const { environment, serverUrl, armTag } = props;\n\n    const topology = await readDeploymentTopology(projectFolder);\n    topology[environment] = {\n      id: armTag,\n      site: {\n        main: serverUrl,\n      },\n      dashboard: {\n        main: `https://manage.wix.com/dashboard/${siteId}?apps-override=${armTag}`,\n      },\n    };\n\n    const path = getDeploymentTopologyPath(projectFolder);\n    await writeJson(path, topology, { spaces: 2 });\n  });\n}\n\nasync function readDeploymentTopology(projectFolder: string) {\n  const path = getDeploymentTopologyPath(projectFolder);\n\n  if (await pathExists(path)) {\n    try {\n      const deployment = await readJson(path);\n      return deploymentTopologySchema.parse(deployment);\n    } catch {\n      // ignore any failures while reading/parsing the .wix/topology.json\n      // it's a temporary file, shouldn't break the app.\n    }\n  }\n\n  return {};\n}\n"],"mappings":"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","names":["_a","_a","_a","import_react","import_react","React"]}