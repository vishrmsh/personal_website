{"version":3,"sources":["../package.json","../src/bi.ts"],"sourcesContent":["{\n  \"name\": \"@wix/cli\",\n  \"description\": \"CLI tool for building Wix sites and applications\",\n  \"version\": \"1.1.101\",\n  \"bin\": {\n    \"wix\": \"bin/wix.cjs\"\n  },\n  \"dependencies\": {\n    \"node-gyp\": \"^8.4.1\"\n  },\n  \"devDependencies\": {\n    \"@commander-js/extra-typings\": \"^13.0.0\",\n    \"@types/columnify\": \"^1.5.4\",\n    \"@types/react\": \"^18.3.3\",\n    \"@types/semver\": \"^7.5.8\",\n    \"@wix/bi-logger-wix-cli\": \"^1.45.0\",\n    \"@wix/cli-astro-commands\": \"workspace:*\",\n    \"@wix/cli-auth\": \"workspace:*\",\n    \"@wix/cli-command-contract\": \"workspace:*\",\n    \"@wix/cli-core-definitions\": \"workspace:*\",\n    \"@wix/cli-debug-log\": \"workspace:*\",\n    \"@wix/cli-error\": \"workspace:*\",\n    \"@wix/cli-error-reporting\": \"workspace:*\",\n    \"@wix/cli-fs\": \"workspace:*\",\n    \"@wix/cli-logger\": \"workspace:*\",\n    \"@wix/cli-site\": \"workspace:*\",\n    \"@wix/cli-site-live\": \"workspace:*\",\n    \"@wix/cli-site-old\": \"workspace:*\",\n    \"@wix/cli-telemetry\": \"workspace:*\",\n    \"@wix/cli-telemetry-react\": \"workspace:*\",\n    \"@wix/cli-test-overrides\": \"workspace:*\",\n    \"@wix/cli-ui-kit\": \"workspace:*\",\n    \"@wix/cli-user-config\": \"workspace:*\",\n    \"@wix/cli-version-manager\": \"workspace:*\",\n    \"@wix/tsup-configs\": \"workspace:*\",\n    \"chalk\": \"^5.4.1\",\n    \"columnify\": \"^1.6.0\",\n    \"commander\": \"^13.0.0\",\n    \"globby\": \"^14.1.0\",\n    \"react\": \"^18.3.1\",\n    \"semver\": \"^7.6.3\",\n    \"variant\": \"^3.0.0-dev.27\",\n    \"zod\": \"^3.24.2\"\n  },\n  \"engines\": {\n    \"node\": \">= 20.11.0\"\n  },\n  \"files\": [\n    \"bin\",\n    \"build\",\n    \"templates\"\n  ],\n  \"keywords\": [\n    \"wix\",\n    \"wix-cli\"\n  ],\n  \"optionalDependencies\": {\n    \"fsevents\": \"^2.3.2\"\n  },\n  \"perfer\": {\n    \"bundleSize\": {\n      \"files\": [\n        {\n          \"glob\": \"./build/index.js\",\n          \"maxSize\": \"985kb\"\n        }\n      ]\n    }\n  },\n  \"publishConfig\": {\n    \"registry\": \"https://registry.npmjs.org/\",\n    \"access\": \"public\",\n    \"versionBumpStrategy\": \"manual\",\n    \"logLevel\": \"verbose\"\n  },\n  \"scripts\": {\n    \"build\": \"run -T tsup\",\n    \"build:watch\": \"run -T build:watch --filter='@wix/cli'\",\n    \"test\": \"yarn workspace @wix/cli-core-spec run test\",\n    \"test:watch\": \"yarn workspace @wix/cli-core-spec run test:watch\",\n    \"typecheck\": \"run -T tsc --noEmit\"\n  },\n  \"type\": \"module\",\n  \"wix\": {\n    \"artifact\": {\n      \"groupId\": \"com.wixpress.npm\",\n      \"artifactId\": \"wix-cli\"\n    },\n    \"validations\": {\n      \"postBuild\": [\n        \"typecheck\"\n      ]\n    }\n  }\n}\n","import { randomUUID } from 'node:crypto';\nimport type { Command } from '@commander-js/extra-typings';\nimport type { ErrorReporter } from '@wix/cli-error-reporting';\nimport type { BiLogger } from '@wix/cli-telemetry';\nimport { wixCliCliError } from '@wix/bi-logger-wix-cli/v2';\nimport { isCliSystemError } from '@wix/cli-error';\nimport {\n  createBiLogger as createCliBiLogger,\n  reportCommandStartEvent as originalReportCommandStartEvent,\n} from '@wix/cli-telemetry';\nimport packageJson from '../package.json' with { type: 'json' };\n\nexport { addUserFields } from '@wix/cli-telemetry';\n\nexport const createBiLogger = async (\n  errorReporter: ErrorReporter,\n  userId?: string\n) => {\n  const biLogger = await createCliBiLogger(\n    {\n      cliSessionId: randomUUID(),\n    },\n    userId\n  );\n\n  errorReporter.on('errorReported', (error) => {\n    void biLogger.report(\n      wixCliCliError({\n        errorMessage: error.message,\n        errorName: error.name,\n        errorType: isCliSystemError(error) ? 'SystemError' : 'UserError',\n      })\n    );\n  });\n\n  return {\n    biLogger,\n  };\n};\n\nexport const reportCommandStartEvent = (\n  biLogger: BiLogger,\n  command: Command<unknown[]>\n) => {\n  return originalReportCommandStartEvent({\n    biLogger,\n    cliVersion: packageJson.version,\n    command,\n    flow: null,\n  });\n};\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA;AAAA,EACE,MAAQ;AAAA,EACR,aAAe;AAAA,EACf,SAAW;AAAA,EACX,KAAO;AAAA,IACL,KAAO;AAAA,EACT;AAAA,EACA,cAAgB;AAAA,IACd,YAAY;AAAA,EACd;AAAA,EACA,iBAAmB;AAAA,IACjB,+BAA+B;AAAA,IAC/B,oBAAoB;AAAA,IACpB,gBAAgB;AAAA,IAChB,iBAAiB;AAAA,IACjB,0BAA0B;AAAA,IAC1B,2BAA2B;AAAA,IAC3B,iBAAiB;AAAA,IACjB,6BAA6B;AAAA,IAC7B,6BAA6B;AAAA,IAC7B,sBAAsB;AAAA,IACtB,kBAAkB;AAAA,IAClB,4BAA4B;AAAA,IAC5B,eAAe;AAAA,IACf,mBAAmB;AAAA,IACnB,iBAAiB;AAAA,IACjB,sBAAsB;AAAA,IACtB,qBAAqB;AAAA,IACrB,sBAAsB;AAAA,IACtB,4BAA4B;AAAA,IAC5B,2BAA2B;AAAA,IAC3B,mBAAmB;AAAA,IACnB,wBAAwB;AAAA,IACxB,4BAA4B;AAAA,IAC5B,qBAAqB;AAAA,IACrB,OAAS;AAAA,IACT,WAAa;AAAA,IACb,WAAa;AAAA,IACb,QAAU;AAAA,IACV,OAAS;AAAA,IACT,QAAU;AAAA,IACV,SAAW;AAAA,IACX,KAAO;AAAA,EACT;AAAA,EACA,SAAW;AAAA,IACT,MAAQ;AAAA,EACV;AAAA,EACA,OAAS;AAAA,IACP;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAAA,EACA,UAAY;AAAA,IACV;AAAA,IACA;AAAA,EACF;AAAA,EACA,sBAAwB;AAAA,IACtB,UAAY;AAAA,EACd;AAAA,EACA,QAAU;AAAA,IACR,YAAc;AAAA,MACZ,OAAS;AAAA,QACP;AAAA,UACE,MAAQ;AAAA,UACR,SAAW;AAAA,QACb;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EACA,eAAiB;AAAA,IACf,UAAY;AAAA,IACZ,QAAU;AAAA,IACV,qBAAuB;AAAA,IACvB,UAAY;AAAA,EACd;AAAA,EACA,SAAW;AAAA,IACT,OAAS;AAAA,IACT,eAAe;AAAA,IACf,MAAQ;AAAA,IACR,cAAc;AAAA,IACd,WAAa;AAAA,EACf;AAAA,EACA,MAAQ;AAAA,EACR,KAAO;AAAA,IACL,UAAY;AAAA,MACV,SAAW;AAAA,MACX,YAAc;AAAA,IAChB;AAAA,IACA,aAAe;AAAA,MACb,WAAa;AAAA,QACX;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;;;AC9FA;AAAA,SAAS,kBAAkB;AAcpB,IAAMA,kBAAiB,OAC5B,eACA,WACG;AACH,QAAM,WAAW,MAAM;AAAA,IACrB;AAAA,MACE,cAAc,WAAW;AAAA,IAC3B;AAAA,IACA;AAAA,EACF;AAEA,gBAAc,GAAG,iBAAiB,CAAC,UAAU;AAC3C,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,cAAc,MAAM;AAAA,QACpB,WAAW,MAAM;AAAA,QACjB,WAAW,iBAAiB,KAAK,IAAI,gBAAgB;AAAA,MACvD,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL;AAAA,EACF;AACF;AAEO,IAAMC,2BAA0B,CACrC,UACA,YACG;AACH,SAAO,wBAAgC;AAAA,IACrC;AAAA,IACA,YAAY,gBAAY;AAAA,IACxB;AAAA,IACA,MAAM;AAAA,EACR,CAAC;AACH;","names":["createBiLogger","reportCommandStartEvent"]}